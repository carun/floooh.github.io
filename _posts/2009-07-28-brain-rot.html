---
layout: post
title: Brain Rot
date: '2009-07-28T19:43:00.001+01:00'
author: Andre Weissflog
tags: 
modified_time: '2009-07-28T19:43:03.829+01:00'
blogger_id: tag:blogger.com,1999:blog-2948438400037317662.post-9052618953065116555
blogger_orig_url: http://flohofwoe.blogspot.com/2009/07/brain-rot.html
---

<p>I think working on the PS3 is slowly destroying my higher brain functions. All I can think of at the moment are cycle counts, cache misses, memory latency, compiler intrinsics and synchronization issues. It’s becoming harder and harder to communicate with humans, let alone formulate a proper blog post. On one hand I welcome this fallback into nerd-dom, reminds me of the time when I learned programming by hacking hex-code into the 256 bytes of RAM of the LC-80. On the other hand it’s incredibly frustrating because everything takes so fucking long. Working for 3 days on a small problem which doesn’t even exist on other platforms isn’t fun. But ultimately the PS3 port will be incredibly good for Nebula3 because it forces me to think very hard about the data layout and data flows in the engine, and the PS3-port is now laying the foundation to scale beyond 2..3 cores on all future platforms. </p>  <p>So, quick status update before I turn into a zombie:</p>  <ul>   <li>We’ll support <a href="http://www.fmod.org/" target="_blank">FMOD</a> in the future, integration into Nebula3 is currently underway. Only sensible way to do sound in multiplatform projects IMHO.</li>    <li>I have implemented Wolfgang Engel’s <a href="http://diaryofagraphicsprogrammer.blogspot.com/2008/03/light-pre-pass-renderer.html" target="_blank">light pre-pass renderer</a> in the PS3 port. I think we’ll use this also for the other platforms (well, except the Wii of course). Very cool stuff and solves a lot of problems on the fragment-shader level (jeez, I meant pixel-shader). I’ll write a bit more about this later.</li>    <li>I’m currently implementing a job system for Nebula3, designed around PS3 SPURS jobs. On other platforms, jobs will run in a thread-pool on the CPU. It will not be completely multiplatform, but it will be easy to create and maintain jobs for multiplatform projects (the only thing not multiplatform will be the actual job function, but this is usually just a few (maybe a few dozen) lines of code). Once I have profiling results I’ll write a blog post about the design and usage of the job system (it’s a bit different then what I described <a href="http://flohofwoe.blogspot.com/2009/02/eva.html" target="_blank">here</a>).</li>    <li>The multiplayer component of N3 is currently being rewritten and ported to Xbox360 (and later PS3). The PC version (and probably PS3 version too) is based on RakNet, on the 360 we’re using an API from the XDK.</li>    <li>I have completely rewritten the whole StringAtom system for performance and memory footprint and have dropped the generalized Atom&lt;&gt; and Proxy&lt;&gt; classes (which the old StringAtom system was built on). The new system is hardwired for strings and nothing else.</li>    <li>Call Of Juarez BiB totally caught me by surprise. Best game so far this year on the 360 IMHO, and much more streamlined then the original.</li> </ul>  <p>That’s all for now. It will be very good to eventually crawl out of the cave into the sunlight and develop back into a normal human being again :)</p>  