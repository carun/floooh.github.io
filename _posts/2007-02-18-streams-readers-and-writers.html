---
layout: post
title: Streams, Readers and Writers
date: '2007-02-18T11:52:00.000+01:00'
author: Andre Weissflog
tags:
- English
- Nebula
modified_time: '2007-02-18T12:35:27.302+01:00'
blogger_id: tag:blogger.com,1999:blog-2948438400037317662.post-4482457685260076719
blogger_orig_url: http://flohofwoe.blogspot.com/2007/02/streams-readers-and-writers.html
---

The Nebula3 IO subsystem provides Stream objects as generic data storage- and transfer-channels. Subclasses of stream implement or wrap specific data transfer protocols. Stream classes are usually associated with an URI scheme:<br /><ul><li>"file:" scheme maps to IO::FileStream class</li><li>"http:" scheme maps to Net::HttpStream class</li><li>"mem:" scheme maps to IO::MemoryStream class</li></ul>These are the URI schemes and associated stream classes that Nebula3 provides out of the box for now. Stream objects are usually created through the IO::Server::CreateStream() method, which takes an URI and returns a matching Stream object:<br /><pre><br />// create a HttpStream and a FileStream object<br />IO::Server* ioServer = IO::Server::Instance();<br />Ptr&lt Stream&gt httpStream = ioServer->CreateStream("http://www.radonlabs.de/index.html);<br />Ptr&lt Stream&gt fileStream = ioServer->CreateStream("home:readme.txt");<br /></pre><br />An application may associate its own stream classes with URI schemes using the IO::Server::RegisterUriScheme() method.<br /><br />Streams only provide generic Read() and Write() methods to read and write chunks of memory. To access stream data in a more convenient way, StreamReader and StreamWriter objects are attached to the stream. Readers and writers provide specialized interfaces for reading or writing specific types of data. The Nebula3 IO subsystem comes with the following reader and writer classes:<br /><ul><li>BinaryReader/Writer: read/write a stream of typed data elements in binary form<br /></li><li>TextReader/Writer: for reading and writing text data</li><li>XmlReader/Writer: for reading and writing XML formatted data</li></ul>Here's a code example to parse a simple XML file from a HTTP server:<br /><pre><br />// create a stream and attach an XML reader to it<br />Ptr&lt Stream&gt stream = IO::Server::Instance()->CreateStream("http://www.radonlabs.de/books.xml");<br />Ptr&lt XmlReader&gt xmlReader = XmlReader::Create();<br />xmlReader-> SetStream(stream);<br /><br />// start reading...<br />if (xmlReader-> Open())<br />{<br />    // iterate through "books" xml elements<br />    if (xmlReader-> SetToFirstChild("books")) do<br />    {<br />       // read attributes from current element<br />       String author = xmlReader-> GetString("author");<br />       int year = xmlReader-> GetInt("year");<br />       int numPages = xmlReader->GetInt("pages");<br />       ...<br />    }<br />    while (xmlReader-> SetToNextChild("books"));<br />    xmlReader->Close;<br />}<br /></pre><br /><br />Other Nebula3 subsystems may provide their own derived StreamReader and StreamWriter classes. For instance, the Messaging subsystem provides a MessageReader and MessageWriter class for serializing message objects.