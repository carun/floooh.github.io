---
layout: post
title: Updated Nebula3/emscripten Demos
date: '2013-03-18T23:15:00.000+01:00'
author: Andre Weissflog
tags: 
modified_time: '2013-03-20T22:54:57.558+01:00'
thumbnail: http://1.bp.blogspot.com/-tINaqjYyu4k/UUeOYo4SAEI/AAAAAAAAAQk/_mLJbyS86uA/s72-c/Screen+Shot+2013-03-18+at+10.54.35+PM.png
blogger_id: tag:blogger.com,1999:blog-2948438400037317662.post-504622874991723827
blogger_orig_url: http://flohofwoe.blogspot.com/2013/03/updated-nebula3emscripten-demos.html
---

<b>Update 3:</b>&nbsp;I replaced SQLite with a TableData addon, this reduces the map-viewer-demo size from 8 MB down to 5 MB (uncompressed), and reduces startup time dramatically.<br /><b><br /></b><b>Update 2: </b>Demos should now properly work on all WebGL configs again (which support DXT textures to be exact). I've been using more then 254 vertex shader uniforms, and at least ANGLE restrict this number even if the GPU could actually handle a lot more).<br /><b><br /></b><b>Update: </b>Demos don't work on Windows and some other configs since one of the new GLSL shaders doesn't compile. Tested configs are: OSX 10.7.5 with GeForce 9400M, Intel HD3000, HD4000 and Radeon HD 6770M. Fix is coming later today.<br /><br />Finally a new demo update! If you're a Chrome user, please be aware that you need to run these demos in the very latest Chrome Canary (Version 27.0.1444.3 canary) since this contains a bugfix in the V8 Javascript engine (details are here:&nbsp;<a href="https://code.google.com/p/chromium/issues/detail?id=177883" target="_blank">https://code.google.com/p/chromium/issues/detail?id=177883</a>). This bug was also the reason why I held back updates for so long, I couldn't overwrite the version which reproduces this bug, but I also didn't feel like setting up yet another AppEngine project.<br /><div><br /></div><div>Updated demos are here: <a href="http://n3emscripten.appspot.com/" target="_blank">http://n3emscripten.appspot.com</a></div><div><br /></div><div>The DSO map viewer demo is now much closer to the actual map renderer of the Drakensang Online client:<br /><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://n3emscripten.appspot.com/dsomapviewer.html" target="_blank"><img border="0" height="325" src="http://1.bp.blogspot.com/-tINaqjYyu4k/UUeOYo4SAEI/AAAAAAAAAQk/_mLJbyS86uA/s640/Screen+Shot+2013-03-18+at+10.54.35+PM.png" width="640" /></a></div><div><br /></div></div><div>The ground-decals system has been moved over which helps a lot in hiding the tiling structure of the level. The rendering pipeline now includes posteffects like bloom and color-balancing. You're now controlling a "player character", and I added a few more "NPCs" to the map in order to check performance with a couple of characters on screen.</div><div><br /></div><div>All demos now come in 2 flavours: "regular" and "asm.js".&nbsp;</div><div><br /></div><div>ASM.JS is a Mozilla project to define a small subset of Javascript which can be exceptionally well optimized. More about that here:&nbsp;<a href="http://asmjs.org/">http://asmjs.org/</a></div><div><br /></div><div>And I identified the long pause at the start of the map viewer demo, originally I thought this would be caused by generating the collision mesh, which is built at startup from tens-of-thousands of very small mesh fragments, but surprisingly this is extremely fast. The pause is actually caused by parsing the structure of an SQLite database file and reading many small items from the database. Replacing this with a more efficient "table data" subsystem is the next thing on my weekend todo list. The SQLite stuff is really a left-over from the single-player Drakensangs where the world-state was loaded from and written back to SQLite database files.</div><div><br /></div><div>That's it for today!</div><div><br /></div>